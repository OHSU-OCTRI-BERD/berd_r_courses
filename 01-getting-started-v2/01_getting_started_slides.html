<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Getting Started with R and RStudio</title>
    <meta charset="utf-8" />
    <meta name="author" content="Jessica Minnier, PhD &amp; Meike Niederhausen, PhD OCTRI Biostatistics, Epidemiology, Research &amp; Design (BERD) Workshop" />
    <link href="libs/font-awesome/css/fontawesome-all.min.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/5235085b15.js"></script>
    <link rel="stylesheet" href="css/xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="css/my-theme.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: left, middle, inverse, title-slide

# Getting Started with R and RStudio
### Jessica Minnier, PhD &amp; Meike Niederhausen, PhD<br><span style="font-size: 80%;"><a href="https://www.ohsu.edu/xd/research/centers-institutes/octri/education-training/octri-research-forum.cfm">OCTRI Biostatistics, Epidemiology, Research &amp; Design (BERD) Workshop</a> </span>
### <span style="font-size: 80%;">2019/09/24 <br><br><br> <i class="fas  fa-link "></i> slides: <a href="http://bit.ly/berd_intro_r">bit.ly/berd_intro_r</a> <br> <i class="fas  fa-file-pdf "></i> pdf: <a href="http://bit.ly/berd_intro_r_pdf">bit.ly/berd_intro_r_pdf</a></span>

---


layout: true
  
&lt;!-- &lt;div class="my-footer"&gt;&lt;span&gt;bit.ly/berd_tidy&lt;/span&gt;&lt;/div&gt;  --&gt;

---






# Pre-course installation

## Install R

- Windows: 
    - Download from https://cran.rstudio.com/bin/windows/base/
- Mac OS X: 
    - Download the latest .pkg file (currently R-3.6.1.pkg) from https://cran.rstudio.com/bin/macosx/

&lt;!-- UPDATE current R package in future talks --&gt;

## Install RStudio Desktop Open Source License

- Select download file corresponding to your operating system  from https://www.rstudio.com/products/rstudio/download/#download

---

# Questions

- Who has used R?
- What other statistical software have you used?
- Has anyone used other programming languages (C, java, python, etc)?
- Why do you want to learn R?

---

# Learning Objectives

- Basic operations in R/RStudio
- Understand data structures
- Be able to load in data
- Basic operations on data
- Be able to make a plot
- Know how to get help

---
class: center, inverse, middle

# Introduction

Rrrrrr?

---

# What is R? 

.pull-left-60[
- A programming language
- Focus on statistical modeling and data analysis
    + import data, manipulate data, run statistics, make plots
- Useful for "Data Science"
- Great visualizations
- Also useful for most anything else you'd want to tell a computer to do
- Interfaces with other languages i.e. python, C++, bash

]


.pull-right-40[
![](img/R_logo.png)
]


For the history and details: [Wikipedia](https://bit.ly/1efFmaY)

- an interpreted language (run it through a command line)
- procedural programming with functions
- Why "R"?? Scheme (?) inspired S (invented at Bell Labs in 1976) which inspired R (**free and open source!** in 1993)



---

# What is RStudio?

.pull-left[
R is a programming language]
.pull-right[
RStudio is an integrated development environment (IDE) = an interface to use R (with perks!)
]

&lt;center&gt;&lt;img src="img/01_md_rstudio.png" width="78%" height="78%"&gt;&lt;a href="https://moderndive.com/2-getting-started.html"&gt;&lt;br&gt;Modern Dive&lt;/a&gt;&lt;/center&gt;

---

# Start RStudio

## Double click on the `berd_intro_project.Rproj` file.


&lt;center&gt;&lt;img src="img/01_md_r.png" width="78%" height="78%"&gt;&lt;a href="https://moderndive.com/2-getting-started.html"&gt;&lt;br&gt;Modern Dive&lt;/a&gt;&lt;/center&gt;
---

&lt;center&gt;&lt;img src="img/RStudio_Anatomy.svg" width="100%" height="100%"&gt;&lt;a href="http://www-users.york.ac.uk/~er13/17C%20-%202018/pracs/01IntroductionToModuleAndRStudio.html#what_are_r_and_rstudio"&gt;&lt;br&gt;Emma Rand&lt;/a&gt;&lt;/center&gt;

---

# Rstudio demo


---

# More about R Projects - Good Practices

__Use projects__ ([read this](https://r4ds.had.co.nz/workflow-projects.html))
- Create an RStudio project for each data analysis project, for each homework assignment, etc.
- A project is associated with a directory folder
    + Keep data files there
    + Keep scripts there; edit them, run them in bits or as a whole
    + Save your outputs (plots and cleaned data) there
- Only use relative paths, never absolute paths
    + relative (good): `read_csv("data/mydata.csv")`
    + absolute (bad): `read_csv("/home/yourname/Documents/stuff/mydata.csv")`
    
__Advantages of using projects__
- standardizes file paths
- keep everything together
- a whole folder can be easily shared and run on another computer
- when you open the project everything is as you left it


---

class: inverse, middle, center

# Let's code!

---

# Coding in the console 
 
.pull-left[
__Typing and execting code in the console __
* Type code in the console
* Press __return__ to execute the code
* Output shown below

_Coding in the console is not advisable for most situations!_
* We only recommend this for short pieces of code that you don't need to save
* We will be using scripts (`.R` files) to run and save code (in a few slides)


```r
&gt; 7
```

```
[1] 7
```

]


.pull-right[

```r
&gt; 3 + 5
```

```
[1] 8
```

```r
&gt; "hello"
```

```
[1] "hello"
```

```r
&gt; # this is a comment, nothing happens
&gt; # 5 - 8
&gt; 
&gt; # separate multiple commands with ;
&gt; 3 + 5; 4 + 8
```

```
[1] 8
```

```
[1] 12
```
]


---

# We can do math


.pull-left[

```r
&gt; 10^2
```

```
[1] 100
```

```r
&gt; 3 ^ 7
```

```
[1] 2187
```

```r
&gt; 6/9
```

```
[1] 0.6666667
```

```r
&gt; 9-43
```

```
[1] -34
```
]

--

.pull-right[
R follows the rules for order of operations and ignores spaces between numbers (or objects)


```r
&gt; 4^3-2* 7+9 /2
```

```
[1] 54.5
```


The equation above is computed as `$$4^3 âˆ’ (2 \cdot 7) + \frac{9}{2}$$` 
]


---

# Logarithms and exponentials

.pull-left[

Logarithms: `log()` is base `\(e\)`

```r
&gt; log(10)
```

```
[1] 2.302585
```

```r
&gt; log10(10)
```

```
[1] 1
```

]

--

.pull-right[
Exponentials

```r
&gt; exp(1)
```

```
[1] 2.718282
```

```r
&gt; exp(0)
```

```
[1] 1
```
]

--

Check that `log()` is base `\(e\)`


```r
&gt; log(exp(1))
```

```
[1] 1
```

---

# Using functions

* `log()` is an example of a function
* functions have "arguments"
* `?log` in console will show help for `log()`

.pull-left[
Arguments read in order:

```r
&gt; mean(1:4)
```

```
[1] 2.5
```


```r
&gt; seq(1,12,3)
```

```
[1]  1  4  7 10
```
]
.pull-right[
Arguments read by name:

```r
&gt; mean(x = 1:4)
```

```
[1] 2.5
```


```r
&gt; seq(from = 1, to = 12, by = 3)
```

```
[1]  1  4  7 10
```
]

---

# Variables

Data, information, everything is stored as a variable
.pull-left[
* Can assign a variable using either `=` or `&lt;-`
    - Using `&lt;-` is preferable
    - type name of variable to print
    

Assigning just one value:

```r
&gt; x = 5
&gt; x
```

```
[1] 5
```

```r
&gt; x &lt;- 5
&gt; x
```

```
[1] 5
```
]

--

.pull-right[
Assigning a __vector__ of values
* Consecutive integers


```r
&gt; a &lt;- 3:10
&gt; a
```

```
[1]  3  4  5  6  7  8  9 10
```

* __Concatenate__ a string of numbers


```r
&gt; b &lt;- c(5, 12, 2, 100, 8)
&gt; b
```

```
[1]   5  12   2 100   8
```
]


---

# We can do math with variables

.pull-left[
Math using variables with just one value

```r
&gt; x &lt;- 5
&gt; x
```

```
[1] 5
```

```r
&gt; x + 3
```

```
[1] 8
```

```r
&gt; y &lt;- x^2
&gt; y
```

```
[1] 25
```
]

--

.pull-right[
Math on vectors of values: element-wise computation

```r
&gt; a &lt;- 3:6
&gt; a
```

```
[1] 3 4 5 6
```

```r
&gt; a+2; a*3
```

```
[1] 5 6 7 8
```

```
[1]  9 12 15 18
```

```r
&gt; a*a
```

```
[1]  9 16 25 36
```
]


---

# Variable can include text (characters)


```r
&gt; hi &lt;- "hello"
&gt; hi
```

```
[1] "hello"
```

```r
&gt; greetings &lt;- c("Guten Tag", "Hola", hi)
&gt; greetings
```

```
[1] "Guten Tag" "Hola"      "hello"    
```

---

# Missing values

Missing values are denoted as `NA` and are handled differently depending on the operation.

.pull-left[

```r
&gt; x &lt;- c(1, 2, NA, 5)
&gt; x
```

```
[1]  1  2 NA  5
```

```r
&gt; mean(x)
```

```
[1] NA
```

```r
&gt; mean(x, na.rm=TRUE)
```

```
[1] 2.666667
```
]
.pull-right[

```r
&gt; x &lt;- c("a", "a", NA, "b")
&gt; table(x)
```

```
x
a b 
2 1 
```

```r
&gt; table(x, useNA = "always")
```

```
x
   a    b &lt;NA&gt; 
   2    1    1 
```

]

---

# Viewing list of defined variables

 
&lt;!-- __List of defined variables (and other objects)__ --&gt;

* `ls()` is the R command to see what objects have been defined. 
* This list includes all defined objects (including dataframes, functions, etc.)

```r
&gt; ls()
```

```
[1] "a"         "b"         "greetings" "hi"        "x"         "y"        
```

* You can also look at the list in the Environment window:

![](img/01_ls_screenshot.png)

---

# Removing defined variables


* The R command to delete an object is `rm()`. 


```r
&gt; ls()
```

```
[1] "a"         "b"         "greetings" "hi"        "x"         "y"        
```

```r
&gt; rm("greetings", hi)  # Can run with or without quotes
&gt; ls()
```

```
[1] "a" "b" "x" "y"
```

* Remove EVERYTHING - _Be careful!!_

```r
&gt; rm(list=ls())
&gt; ls()
```

```
character(0)
```
 
 * Can also remove everything using the _Clear Workspace_ option in the _Session_ menu.

---

# Common console errors (1/2)
 
__Incomplete commands__ 

.pull-left[
* When the console is waiting for a new command, the prompt line begins with `&gt;`
  + If the console prompt is `+`, then a previous command is incomplete
  + You can finish typing the command in the console window
]
   
.pull-right[
Example:


```r
&gt; 3 + (2*6
+ )
```

```
[1] 15
```
]



---

# Common console errors (2/2)


__Object is not found__

* This happens when text is entered for a non-existent variable (object)

Example:


```r
&gt; hello
```

```
Error in eval(expr, envir, enclos): object 'hello' not found
```

* Can be due to missing quotes


```r
&gt; install.packages(dplyr) # need install.packages("dplyr")
```

```
Error in install.packages(dplyr): object 'dplyr' not found
```
---

class: inverse, center, middle

# R scripts (save your work!)

---

# Coding in a script (1/3)

&lt;!-- * Note that both of these options show the keyboard shortcut for your operating system   --&gt;

* __Create a new script__ by 
    + selecting `File -&gt; New File -&gt; R Script`, 
    + *or* clicking on ![](img/01_Script_create.png) (the left most button at the top of the scripting window), and then selecting the first option `R Script` 

  
* __Type code__ in the script
    - Type each R command on its own line
    - Use `#` to convert text to comments so that text doesn't accidentally get executed as an R command

![](img/01_Scripting_practice1.png)
---

# Coding in a script (2/3)


* __Select code__ you want to execute, by 
    - placing the cursor in the line of code you want to execute, 
    - *or* highlighting the code you want to execute




* __Execute code__ in the script, by
    - clicking on the ![](img/01_Script_Run.png) button in the top right corner of the scripting window, 
    - or typing one of the following key combinations to execute the code
          + __Windows__:  __ctrl + return__
          + __Mac__:  __command + return__


&lt;!-- ![](img/01_Scripting_practice2.png) --&gt;

&lt;center&gt;&lt;img src="img/01_Scripting_practice2.png" width="80%" height="80%"&gt;&lt;/center&gt;  

---

# Coding in a script (3/3)

* The screenshot below shows code in the scripting window (top left window)
* The executed highlighted code and its output appear in the console window (bottom left window)

&lt;!-- ![](img/01_Scripting_practice3.png) --&gt;

&lt;center&gt;&lt;img src="img/01_Scripting_practice3.png" width="90%" height="90%"&gt;&lt;/center&gt;  


---

# Useful keyboard shortcuts

.pull-left-60[

action | mac | windows/linux
---| ---| ---
run code in script | cmd + enter | ctrl + enter 
`&lt;-`| option + - | alt + -
]
.pull-right-40[
Try typing (with shortcut) in a script and running

```r
y &lt;- 5
y
```
Now, in the *console*, press the up arrow.
]

## Others: ([see full list](https://support.rstudio.com/hc/en-us/articles/200711853-Keyboard-Shortcuts))

action | mac | windows/linux
---| ---| ---
interrupt currently executing command | esc | esc
in console, go to previously run code | up/down | up/down
keyboard shortcut help | option + shift + k | alt + shift + k
---

# Saving a script

* __Save a script__ by 
    + selecting `File -&gt; Save`, 
    + or clicking on ![](img/01_Script_Save.png) (towards the left above the scripting window)

* You will need to specify
    + a __filename__ to save the script as
        - ALWAYS use __.R__ as the filename extension for R scripts
    + the __folder__ to save the script in

---

class: center, inverse, middle

# Practice time!

---

# Practice 1

1. Open a new R script and type code/answers for next tasks in it. Save as `Practice1.R`

1. Create a vector of all integers from 4 to 10, and save it as `a1`. 

1. Create a vector of _even_ integers from 4 to 10, and save it as `a2`. 

1. What is the sum of `a1` and `a2`? 

1. What does the command `sum(a1)` do?

1. What does the command `length(a1)` do?

1. Use the commands to calculate the average of the values in `a1`.

1. The formula for the first `\(n\)` integers is `\(n(n+1)/2\)`. Compute the sum of all integers from 1 to 100 to verify that this formula holds for `\(n=100\)`. 

1. Compute the sum of the squares of all integers from 1 to 100.

1. Take a break!


---

class: inverse, middle, center

# Object types

---

# Data frames

.pull-left-60[
__Vectors__ vs. __data frames__: a data frame is a collection (or array or table) of vectors


```r
df &lt;- data.frame(
  IDs=1:3, 
  gender=c("male", "female", "Male"), 
  age=c(28, 35.5, 31),
  trt = c("control", "1", "1"),
  Veteran = c(FALSE, TRUE, TRUE)
  )
df
```

```
##   IDs gender  age     trt Veteran
## 1   1   male 28.0 control   FALSE
## 2   2 female 35.5       1    TRUE
## 3   3   Male 31.0       1    TRUE
```

]
.pull-right-40[

* Allows different columns to be of different data types (i.e. numeric vs. text)
* Both numeric and text can be stored within a column (stored together as *text*).

* Vectors and data frames are examples of _**objects**_ in R. 
  + There are other types of R objects to store data, such as matrices, lists, and tibbles.
  + These will be discussed in future R workshops.
]

---

# Variable (column) types

type | description
---|---
integer | integer-valued numbers
numeric | numbers that are decimals
factor | categorical variables stored with levels (groups)
character | text, "strings"
logical | boolean (TRUE, FALSE)

&lt;!-- Each variable (column) in a data frame can be of a different type. --&gt;

* View the __structure__ of our data frame to see what the variable types are:


```r
str(df)
```

```
## 'data.frame':	3 obs. of  5 variables:
##  $ IDs    : int  1 2 3
##  $ gender : Factor w/ 3 levels "female","male",..: 2 1 3
##  $ age    : num  28 35.5 31
##  $ trt    : Factor w/ 2 levels "1","control": 2 1 1
##  $ Veteran: logi  FALSE TRUE TRUE
```

&lt;!-- * Note that the ID column is _integer_ type since the values are all whole numbers, although we likely would think of it as being a categorical variable and thus prefer it to be a factor. --&gt;

---

# Data frame cells, rows, or columns


&lt;!-- * Our data frame `df` --&gt;
.pull-left[
Show whole data frame

```r
df
```

```
##   IDs gender  age     trt Veteran
## 1   1   male 28.0 control   FALSE
## 2   2 female 35.5       1    TRUE
## 3   3   Male 31.0       1    TRUE
```

Specific cell value: 

`DatSetName[row#, column#]`


```r
# Second row, Third column
df[2, 3]
```

```
## [1] 35.5
```
]

.pull-right[
Entire column: 

`DatSetName[, column#]`

```r
# Third column
df[, 3]
```

```
## [1] 28.0 35.5 31.0
```

Entire row: `DatSetName[row#, ]`

```r
# Second row
df[2,]
```

```
##   IDs gender  age trt Veteran
## 2   2 female 35.5   1    TRUE
```
]


---

class: inverse, center, middle

# Getting the data into Rstudio

---

# Load a data set

* Read in csv file from file path with code (filepath relative to Rproj directory)


```r
mydata &lt;- read.csv("data/yrbss_demo.csv")
```



* Or, open saved file using Import Dataset button in Environment window:  ![](img/01_Import_Dataset.png). 
  + If you use this option, then copy and paste the importing code to your script so that you have a record of from where and how you loaded the data set.



```r
View(mydata) 
# Can also view the data by clicking on its name in the Environment tab
```


&lt;!-- ![](img/01_View_data_screenshot.png) --&gt;

&lt;img src="img/01_View_data_screenshot2.png" width="110%" height="110%"&gt;


---

# About the data

Data from the CDC's [Youth Risk Behavior Surveillance System (YRBSS) ](https://www.cdc.gov/healthyyouth/data/yrbs/index.htm)

- small subset (20 rows) of the full complex survey data
- national school-based survey conducted by CDC and state, territorial, tribal, and local surveys conducted by state, territorial, and local education and health agencies and tribal governments
- monitors health-related behaviors (including alcohol &amp; drug use, unhealthy &amp; dangerous behaviors, sexuality, physical activity); see [Questionnaires](https://www.cdc.gov/healthyyouth/data/yrbs/questionnaires.htm)
- original data in the R package [`yrbss`](https://github.com/hadley/yrbss) which includes YRBSS from 1991-2013

&lt;img src="img/01_yrbss.png" width="110%" height="110%"&gt;

---

# Data set summary


```r
summary(mydata)
```

```
##        id                             age        sex      grade  
##  Min.   : 335340   14 years old         :1   Female:12   10th:8  
##  1st Qu.: 925193   15 years old         :4   Male  : 8   11th:4  
##  Median :1207132   16 years old         :7               12th:4  
##  Mean   :1093150   17 years old         :7               9th :4  
##  3rd Qu.:1313188   18 years old or older:1                       
##  Max.   :1316123                                                 
##                        race4        bmi          weight_kg    
##  All other races          :5   Min.   :17.48   Min.   :43.09  
##  Black or African American:3   1st Qu.:20.36   1st Qu.:57.27  
##  Hispanic/Latino          :6   Median :22.23   Median :64.86  
##  White                    :4   Mean   :23.01   Mean   :64.09  
##  NA's                     :2   3rd Qu.:26.58   3rd Qu.:70.31  
##                                Max.   :29.35   Max.   :84.82  
##                       text_while_driving_30d smoked_ever bullied_past_12mo
##  0 days                          : 5         No  :10     Mode :logical    
##  1 or 2 days                     : 2         Yes : 6     FALSE:11         
##  3 to 5 days                     : 1         NA's: 4     TRUE :7          
##  All 30 days                     : 1                     NA's :2          
##  I did not drive the past 30 days: 1                                      
##  NA's                            :10                                      
##     height_m    
##  Min.   :1.470  
##  1st Qu.:1.600  
##  Median :1.665  
##  Mean   :1.669  
##  3rd Qu.:1.758  
##  Max.   :1.880
```

---

# Data set info

.pull-left-40[

```r
dim(mydata)
```

```
## [1] 20 11
```

```r
nrow(mydata)
```

```
## [1] 20
```

```r
ncol(mydata)
```

```
## [1] 11
```
]

.pull-right-60[

```r
names(mydata)
```

```
##  [1] "id"                     "age"                   
##  [3] "sex"                    "grade"                 
##  [5] "race4"                  "bmi"                   
##  [7] "weight_kg"              "text_while_driving_30d"
##  [9] "smoked_ever"            "bullied_past_12mo"     
## [11] "height_m"
```
]


---

# Data structure

* What are the different __variable types__ in this data set?



```r
str(mydata)   # structure of data
```

```
## 'data.frame':	20 obs. of  11 variables:
##  $ id                    : int  335340 638618 922382 923122 923963 925603 933724 935435 1096564 1108114 ...
##  $ age                   : Factor w/ 5 levels "14 years old",..: 4 3 1 2 2 3 3 4 2 4 ...
##  $ sex                   : Factor w/ 2 levels "Female","Male": 1 1 2 2 2 2 1 1 2 1 ...
##  $ grade                 : Factor w/ 4 levels "10th","11th",..: 1 4 4 4 1 1 1 3 1 4 ...
##  $ race4                 : Factor w/ 4 levels "All other races",..: 4 NA 4 4 2 1 1 1 1 2 ...
##  $ bmi                   : num  27.6 29.3 18.2 21.4 19.6 ...
##  $ weight_kg             : num  66.2 84.8 57.6 60.3 63.5 ...
##  $ text_while_driving_30d: Factor w/ 5 levels "0 days","1 or 2 days",..: NA NA NA NA NA NA NA NA NA NA ...
##  $ smoked_ever           : Factor w/ 2 levels "No","Yes": NA 2 2 2 1 1 2 1 NA 1 ...
##  $ bullied_past_12mo     : logi  NA NA FALSE FALSE TRUE TRUE ...
##  $ height_m              : num  1.55 1.7 1.78 1.68 1.8 ...
```


---

# View the beginning of a data set


```r
head(mydata)
```

```
##       id          age    sex grade                     race4     bmi
## 1 335340 17 years old Female  10th                     White 27.5671
## 2 638618 16 years old Female   9th                      &lt;NA&gt; 29.3495
## 3 922382 14 years old   Male   9th                     White 18.1827
## 4 923122 15 years old   Male   9th                     White 21.3754
## 5 923963 15 years old   Male  10th Black or African American 19.5988
## 6 925603 16 years old   Male  10th           All other races 22.1910
##   weight_kg text_while_driving_30d smoked_ever bullied_past_12mo height_m
## 1     66.23                   &lt;NA&gt;        &lt;NA&gt;                NA 1.550000
## 2     84.82                   &lt;NA&gt;         Yes                NA 1.699999
## 3     57.61                   &lt;NA&gt;         Yes             FALSE 1.779999
## 4     60.33                   &lt;NA&gt;         Yes             FALSE 1.680001
## 5     63.50                   &lt;NA&gt;          No              TRUE 1.799998
## 6     70.31                   &lt;NA&gt;          No              TRUE 1.780000
```

```r
head(mydata, 2)
```

```
##       id          age    sex grade race4     bmi weight_kg
## 1 335340 17 years old Female  10th White 27.5671     66.23
## 2 638618 16 years old Female   9th  &lt;NA&gt; 29.3495     84.82
##   text_while_driving_30d smoked_ever bullied_past_12mo height_m
## 1                   &lt;NA&gt;        &lt;NA&gt;                NA 1.550000
## 2                   &lt;NA&gt;         Yes                NA 1.699999
```

---

# View the end of a data set


```r
tail(mydata)
```

```
##         id                   age    sex grade                     race4
## 15 1313153          16 years old Female  11th           Hispanic/Latino
## 16 1313291          16 years old Female  11th                     White
## 17 1313477          16 years old Female  10th           All other races
## 18 1315121          17 years old Female  11th                      &lt;NA&gt;
## 19 1315850          17 years old Female  12th           Hispanic/Latino
## 20 1316123 18 years old or older Female  12th Black or African American
##        bmi weight_kg           text_while_driving_30d smoked_ever
## 15 26.5781     68.04                           0 days          No
## 16 24.8047     63.50                      3 to 5 days          No
## 17 25.0318     76.66                           0 days          No
## 18 22.2687     54.89 I did not drive the past 30 days         Yes
## 19 19.4922     49.90                           0 days        &lt;NA&gt;
## 20 27.4894     74.84                      All 30 days         Yes
##    bullied_past_12mo height_m
## 15              TRUE 1.600001
## 16             FALSE 1.600000
## 17              TRUE 1.750001
## 18             FALSE 1.569998
## 19             FALSE 1.599999
## 20             FALSE 1.650001
```

---

class: inverse, center, middle

# Working with the data

---

# The $

Suppose we want to single out the column of BMI values.
* How did we previously learn to do this?

--


```r
mydata[, 6]
```

```
##  [1] 27.5671 29.3495 18.1827 21.3754 19.5988 22.1910 20.9913 17.4814
##  [9] 22.4593 26.5781 21.1874 19.4637 20.6121 27.4648 26.5781 24.8047
## [17] 25.0318 22.2687 19.4922 27.4894
```

The problem with this method, is that we need to know the column number which can change as we make changes to the data set. 

--

* Use the `$` instead: `DatSetName$VariableName`


```r
mydata$bmi
```

```
##  [1] 27.5671 29.3495 18.1827 21.3754 19.5988 22.1910 20.9913 17.4814
##  [9] 22.4593 26.5781 21.1874 19.4637 20.6121 27.4648 26.5781 24.8047
## [17] 25.0318 22.2687 19.4922 27.4894
```

---

# Basic plots of numeric data: Histogram


```r
hist(mydata$bmi)
```

&lt;img src="01_getting_started_slides_files/figure-html/unnamed-chunk-45-1.png" style="display: block; margin: auto;" /&gt;

With extra features: 


```r
hist(mydata$bmi, xlab = "BMI", main="BMIs of students")
```

&lt;img src="01_getting_started_slides_files/figure-html/unnamed-chunk-46-1.png" style="display: block; margin: auto;" /&gt;

---

# Basic plots of numeric data: Boxplot

.pull-left[

```r
boxplot(mydata$bmi)
```

&lt;img src="01_getting_started_slides_files/figure-html/unnamed-chunk-47-1.png" style="display: block; margin: auto;" /&gt;

]

--

.pull-right[

```r
boxplot(mydata$bmi ~ mydata$sex, 
  horizontal = TRUE, 
  xlab = "BMI", ylab = "sex",
  main = "BMIs of students by sex")
```

&lt;img src="01_getting_started_slides_files/figure-html/unnamed-chunk-48-1.png" style="display: block; margin: auto;" /&gt;
]

---

# Basic plots of numeric data: Scatterplot

.pull-left[

```r
plot(mydata$weight_kg, mydata$bmi)
```

&lt;img src="01_getting_started_slides_files/figure-html/unnamed-chunk-49-1.png" style="display: block; margin: auto;" /&gt;
]

.pull-right[

```r
plot(mydata$weight_kg, mydata$bmi, 
   xlab = "weight (kg)", ylab = "BMI", 
   main = "BMI vs. Weight")
```

&lt;img src="01_getting_started_slides_files/figure-html/unnamed-chunk-50-1.png" style="display: block; margin: auto;" /&gt;
]

---

# Summary stats of numeric data (1/2)

## Standard R `summary` command


```r
summary(mydata$bmi)
```

```
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   17.48   20.36   22.23   23.01   26.58   29.35
```

## Mean and standard deviation


```r
mean(mydata$bmi)
```

```
## [1] 23.00838
```

```r
sd(mydata$bmi)
```

```
## [1] 3.56471
```

---

# Summary stats of numeric data (2/2)
&lt;!-- QQ: Why is (2/2) being cut off? It's not cut off for (1/2).--&gt;
## Min, max, &amp; median

.pull-left[

```r
min(mydata$bmi)
```

```
## [1] 17.4814
```

```r
max(mydata$bmi)
```

```
## [1] 29.3495
```
]

.pull-right[

```r
median(mydata$bmi)
```

```
## [1] 22.22985
```
]

## Quantiles


```r
quantile(mydata$bmi, prob=c(0, .25, .5, .75, 1))  
```

```
##       0%      25%      50%      75%     100% 
## 17.48140 20.35878 22.22985 26.57810 29.34950
```

---

# Add height column to data frame

Since `\(\textrm{BMI} = \frac{kg}{m^2}\)`, we have
`\(\textrm{height}(m) = \sqrt{\frac{\textrm{weight}(kg)}{\textrm{BMI}}}\)`

&lt;!-- * UPDATE: need correct units! --&gt;

```r
mydata$height_m &lt;- sqrt( mydata$weight_kg / mydata$bmi)
mydata$height_m
```

```
##  [1] 1.550000 1.699999 1.779999 1.680001 1.799998 1.780000 1.469998
##  [8] 1.570002 1.879998 1.600001 1.779998 1.699999 1.730001 1.600001
## [15] 1.600001 1.600000 1.750001 1.569998 1.599999 1.650001
```

```r
dim(mydata); names(mydata)
```

```
## [1] 20 11
```

```
##  [1] "id"                     "age"                   
##  [3] "sex"                    "grade"                 
##  [5] "race4"                  "bmi"                   
##  [7] "weight_kg"              "text_while_driving_30d"
##  [9] "smoked_ever"            "bullied_past_12mo"     
## [11] "height_m"
```


---

# Access specific columns in data set

.pull-left[
Previously we used `DatSetName[, column#]`


```r
mydata[, c(2, 6)] # 2nd &amp; 6th columns
```

```
##                      age     bmi
## 1           17 years old 27.5671
## 2           16 years old 29.3495
## 3           14 years old 18.1827
## 4           15 years old 21.3754
## 5           15 years old 19.5988
## 6           16 years old 22.1910
## 7           16 years old 20.9913
## 8           17 years old 17.4814
## 9           15 years old 22.4593
## 10          17 years old 26.5781
## 11          16 years old 21.1874
## 12          17 years old 19.4637
## 13          17 years old 20.6121
## 14          15 years old 27.4648
## 15          16 years old 26.5781
## 16          16 years old 24.8047
## 17          16 years old 25.0318
## 18          17 years old 22.2687
## 19          17 years old 19.4922
## 20 18 years old or older 27.4894
```
]


.pull-right[
The code below uses _column names_ instead of numbers.


```r
mydata[, c("age", "bmi")]
```

```
##                      age     bmi
## 1           17 years old 27.5671
## 2           16 years old 29.3495
## 3           14 years old 18.1827
## 4           15 years old 21.3754
## 5           15 years old 19.5988
## 6           16 years old 22.1910
## 7           16 years old 20.9913
## 8           17 years old 17.4814
## 9           15 years old 22.4593
## 10          17 years old 26.5781
## 11          16 years old 21.1874
## 12          17 years old 19.4637
## 13          17 years old 20.6121
## 14          15 years old 27.4648
## 15          16 years old 26.5781
## 16          16 years old 24.8047
## 17          16 years old 25.0318
## 18          17 years old 22.2687
## 19          17 years old 19.4922
## 20 18 years old or older 27.4894
```
]


&lt;!-- This is the same as `mydata$bmi`. --&gt;

---

# Access specific rows in data set


&lt;!-- Below is code that uses the column names instead of row and column numbers. --&gt;

* Rows for 14 year olds only

```r
mydata[mydata$age == "14 years old",]
```

```
##       id          age  sex grade race4     bmi weight_kg
## 3 922382 14 years old Male   9th White 18.1827     57.61
##   text_while_driving_30d smoked_ever bullied_past_12mo height_m
## 3                   &lt;NA&gt;         Yes             FALSE 1.779999
```

In this case the output is only one row since there is only one 14 year old.

* Rows for teens with BMI less than 19

```r
mydata[mydata$bmi &lt; 19,]
```

```
##       id          age    sex grade           race4     bmi weight_kg
## 3 922382 14 years old   Male   9th           White 18.1827     57.61
## 8 935435 17 years old Female  12th All other races 17.4814     43.09
##   text_while_driving_30d smoked_ever bullied_past_12mo height_m
## 3                   &lt;NA&gt;         Yes             FALSE 1.779999
## 8                   &lt;NA&gt;          No             FALSE 1.570002
```

---

# Access specific values in data set 

* Grade and race for 15 year olds only


```r
mydata[mydata$age == "15 years old", c("age", "grade", "race4")]
```

```
##             age grade                     race4
## 4  15 years old   9th                     White
## 5  15 years old  10th Black or African American
## 9  15 years old  10th           All other races
## 14 15 years old  10th           Hispanic/Latino
```

* Age, sex, and BMI for students with BMI less than 19


```r
mydata[mydata$bmi &lt; 19, c("age", "sex", "bmi")]
```

```
##            age    sex     bmi
## 3 14 years old   Male 18.1827
## 8 17 years old Female 17.4814
```


---

# Practice 2

1. Create a new script and save it as `Practice2.R`

1. Create data frames for males and females separately.

1. Do males and females have similar BMIs? Weights? Compares means, standard deviations, range, and boxplots.

1. Plot BMI vs. weight for each gender separately. Do they have similar relationships?

&lt;!-- TO DO: FIX THIS, NAs are including and changing means. See solution file --&gt;
1. Are males or females more likely to be bullied in the past 12 months? Calculate the percentage bullied for each gender.

1. Are students that were bullied in the past year more likely to have smoked in the past? Does this vary by gender?


---

# Save data frame

* Save __.RData__ file: the standard R format, which is recommended if saving data for future use in R

```r
save(mydata, file = "data/mydata.RData")
```

You can load .RData files using the load() command:


```r
load("data/mydata.RData")
```
  

&lt;br&gt;

* Save __csv__ file: comma-separated values


```r
write.csv(mydata, file = "data/mydata.csv", col.names = TRUE, row.names = FALSE)
```


---

class: inverse, center, middle

# The more you know

---

# Installing and using packages

- Packages are to R like apps are to your phone/OS
- Packages contain additional functions and data
- Install packages with `install.packages()`
  + Also can use the "Packages" tab in Files/Plots/Packages/Help/Viewer window
  + *Only install once (unless you want to update)*
  + Installs from [Comprehensive R Archive Network (CRAN)](https://cran.r-project.org/) = package mothership


```r
install.packages("dplyr")   # only do this ONCE, use quotes
```

- Load packages: At the top of your script include `library()` commands to load each required package *every* time you open Rstudio.

```r
library(dplyr)    # run this every time you open Rstudio
```

- Use a function without loading the package with `::`

```r
dplyr::arrange(mydata, bmi)
```

```
##         id                   age    sex grade                     race4
## 1   935435          17 years old Female  12th           All other races
## 2   922382          14 years old   Male   9th                     White
## 3  1307481          17 years old   Male  12th           Hispanic/Latino
## 4  1315850          17 years old Female  12th           Hispanic/Latino
## 5   923963          15 years old   Male  10th Black or African American
## 6  1307872          17 years old   Male  11th           Hispanic/Latino
## 7   933724          16 years old Female  10th           All other races
## 8  1306150          16 years old   Male  10th           Hispanic/Latino
## 9   923122          15 years old   Male   9th                     White
## 10  925603          16 years old   Male  10th           All other races
## 11 1315121          17 years old Female  11th                      &lt;NA&gt;
## 12 1096564          15 years old   Male  10th           All other races
## 13 1313291          16 years old Female  11th                     White
## 14 1313477          16 years old Female  10th           All other races
## 15 1108114          17 years old Female   9th Black or African American
## 16 1313153          16 years old Female  11th           Hispanic/Latino
## 17 1311617          15 years old Female  10th           Hispanic/Latino
## 18 1316123 18 years old or older Female  12th Black or African American
## 19  335340          17 years old Female  10th                     White
## 20  638618          16 years old Female   9th                      &lt;NA&gt;
##        bmi weight_kg           text_while_driving_30d smoked_ever
## 1  17.4814     43.09                             &lt;NA&gt;          No
## 2  18.1827     57.61                             &lt;NA&gt;         Yes
## 3  19.4637     56.25                      1 or 2 days          No
## 4  19.4922     49.90                           0 days        &lt;NA&gt;
## 5  19.5988     63.50                             &lt;NA&gt;          No
## 6  20.6121     61.69                      1 or 2 days          No
## 7  20.9913     45.36                             &lt;NA&gt;         Yes
## 8  21.1874     67.13                           0 days        &lt;NA&gt;
## 9  21.3754     60.33                             &lt;NA&gt;         Yes
## 10 22.1910     70.31                             &lt;NA&gt;          No
## 11 22.2687     54.89 I did not drive the past 30 days         Yes
## 12 22.4593     79.38                             &lt;NA&gt;        &lt;NA&gt;
## 13 24.8047     63.50                      3 to 5 days          No
## 14 25.0318     76.66                           0 days          No
## 15 26.5781     68.04                             &lt;NA&gt;          No
## 16 26.5781     68.04                           0 days          No
## 17 27.4648     70.31                           0 days          No
## 18 27.4894     74.84                      All 30 days         Yes
## 19 27.5671     66.23                             &lt;NA&gt;        &lt;NA&gt;
## 20 29.3495     84.82                             &lt;NA&gt;         Yes
##    bullied_past_12mo height_m
## 1              FALSE 1.570002
## 2              FALSE 1.779999
## 3              FALSE 1.699999
## 4              FALSE 1.599999
## 5               TRUE 1.799998
## 6              FALSE 1.730001
## 7               TRUE 1.469998
## 8              FALSE 1.779998
## 9              FALSE 1.680001
## 10              TRUE 1.780000
## 11             FALSE 1.569998
## 12              TRUE 1.879998
## 13             FALSE 1.600000
## 14              TRUE 1.750001
## 15             FALSE 1.600001
## 16              TRUE 1.600001
## 17              TRUE 1.600001
## 18             FALSE 1.650001
## 19                NA 1.550000
## 20                NA 1.699999
```

---

# Installing packages from other places (i.e. github, URLs)

- Need to have [remotes](https://github.com/r-lib/remotes#readme) package installed first:

```r
install.packages("remotes") 
```

- To install a package from github (often in development) use `install_github()` from the remotes package


```r
# https://github.com/hadley/yrbss
remotes::install_github("hadley/yrbss")

# Load it the same way
library(yrbss)
```



---

# How to get help (1/2)

Use `?` in front of function name in console. Try this:

![](img/01_help_screenshot.png)
---

# How to get help (2/2)

- Use `??` (i.e `??dplyr` or `??read_csv`) for searching all documentation in installed packages (including unloaded packages)
- search [Stack Overflow #r tag](https://stackoverflow.com/questions/tagged/r)
- googlequestion + rcran or + r (i.e. "make a boxplot rcran" "make a boxplot r")
- google error in quotes (i.e. `"Evaluation error: invalid type (closure) for variable '***'"`)
- search [github](https://github.com/search/advanced?q=language:R) for your function name (to see examples) or error
- [Rstudio community](https://community.rstudio.com/)
- [twitter #rstats](https://twitter.com/search?q=%23rstats&amp;src=typd)

---

# Resources

- Click on this [List of resources for learning R](https://github.com/jminnier/awesome-rstats/blob/master/learn-r.md)
- Watch [recordings of our other workshops](https://github.com/jminnier/berd_r_courses)
- __Highly recommend *Data Wrangling in R with Tidyverse*__

Getting started:

- [RStudio IDE Cheatsheet](https://resources.rstudio.com/rstudio-cheatsheets/rstudio-ide-cheat-sheet)
- Install R/RStudio [help video](https://www.youtube.com/watch?v=kOQDdJZ7Hl4&amp;feature=youtu.be)
- [Basic Basics](http://rladiessydney.org/post/2018/11/05/basicbasics/)

Some of this is drawn from materials in online books/lessons:

- [Intro to R/RStudio](http://www-users.york.ac.uk/~er13/17C%20-%202018/pracs/01IntroductionToModuleAndRStudio.html) by Emma Rand
- [Modern Dive](https://moderndive.com/) - An Introduction to Statistical and Data Sciences via R by Chester Ismay &amp; Albert Kim
- [Cookbook for R](http://www.cookbook-r.com/) by Winston Chang

---

# Local resources

- OHSU's [BioData club](https://biodata-club.github.io/) + active slack channel
- Portland's [R user meetup group](https://www.meetup.com/portland-r-user-group/) + active slack channel
- [R-ladies PDX](https://www.meetup.com/R-Ladies-PDX/) meetup group

---

## Contact info:

Jessica Minnier: _minnier@ohsu.edu_

Meike Niederhausen: _niederha@ohsu.edu_


## This workshop info:

- Code for these slides on github: [jminnier/berd_r_courses](https://github.com/jminnier/berd_r_courses)
- all the [R code in an R script](https://jminnier-berd-r-courses.netlify.com/01-getting-started-v2/01_getting_started_slides.R)
- answers to practice problems can be found here: [html](https://jminnier-berd-r-courses.netlify.com/01-getting-started-v2/01_getting_started_Practice_Answers.html), [pdf](https://jminnier-berd-r-courses.netlify.com/01-getting-started-v2/01_getting_started_Practice_Answers.pdf)
- The project folder of examples can be downloaded at [github.com/jminnier/berd_intro_project](https://github.com/jminnier/berd_intro_project) &amp; the solutions are in the `solns/` folder.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "tomorrow",
"highlightLines": true,
"highlightLanguage": "r",
"countIncrementalSlides": false,
"ratio": "16:10"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
